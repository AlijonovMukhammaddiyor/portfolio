{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from \"react\";\nimport * as PropTypes from \"prop-types\";\nimport { useSpring, useTransition, animated, config } from \"react-spring\";\n\nvar newText = function (text) {\n  return {\n    key: \"\" + Date.now(),\n    data: text\n  };\n};\n\nvar TextTransition = function (_a) {\n  var text = _a.text,\n      direction = _a.direction,\n      inline = _a.inline,\n      delay = _a.delay,\n      className = _a.className,\n      style = _a.style,\n      noOverflow = _a.noOverflow,\n      springConfig = _a.springConfig;\n  var placeholderRef = React.useRef(null);\n\n  var _b = React.useState(function () {\n    return newText(text.toString());\n  }),\n      content = _b[0],\n      setContent = _b[1];\n\n  var _c = React.useState(0),\n      timeoutId = _c[0],\n      setTimeoutId = _c[1];\n\n  var _d = React.useState(true),\n      isFirstRun = _d[0],\n      setIsFirstRun = _d[1];\n\n  var _e = React.useState({\n    width: inline ? 0 : \"auto\"\n  }),\n      width = _e[0],\n      setWidth = _e[1];\n\n  var transitions = useTransition(content, function (item) {\n    return item.key;\n  }, {\n    from: {\n      opacity: 0,\n      transform: \"translateY(\" + (direction === \"down\" ? \"-100%\" : \"100%\") + \")\"\n    },\n    enter: {\n      opacity: 1,\n      transform: \"translateY(0%)\"\n    },\n    leave: {\n      opacity: 0,\n      transform: \"translateY(\" + (direction === \"down\" ? \"100%\" : \"-100%\") + \")\"\n    },\n    config: springConfig,\n    immediate: isFirstRun,\n    onDestroyed: function () {\n      setIsFirstRun(false);\n    }\n  });\n  var animatedProps = useSpring({\n    to: width,\n    config: springConfig,\n    immediate: isFirstRun\n  });\n  React.useEffect(function () {\n    setTimeoutId(setTimeout(function () {\n      if (!placeholderRef.current) return;\n      placeholderRef.current.innerHTML = text.toString();\n      if (inline) setWidth({\n        width: placeholderRef.current.offsetWidth\n      });\n      setContent(newText(text.toString()));\n    }, delay));\n  }, [text]);\n  React.useEffect(function () {\n    return function () {\n      return clearTimeout(timeoutId);\n    };\n  }, []);\n  return React.createElement(animated.div, {\n    className: \"text-transition \" + className,\n    style: __assign(__assign(__assign({}, animatedProps), {\n      whiteSpace: inline ? \"nowrap\" : \"normal\",\n      display: inline ? \"inline-block\" : \"block\",\n      position: \"relative\"\n    }), style)\n  }, React.createElement(\"span\", {\n    ref: placeholderRef,\n    style: {\n      visibility: \"hidden\"\n    },\n    className: \"text-transition_placeholder\"\n  }), React.createElement(\"div\", {\n    className: \"text-transition_inner\",\n    style: {\n      overflow: noOverflow ? \"hidden\" : \"visible\",\n      display: \"block\",\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      height: \"100%\",\n      width: \"100%\"\n    }\n  }, transitions.map(function (_a) {\n    var item = _a.item,\n        props = _a.props,\n        key = _a.key;\n    return React.createElement(animated.div, {\n      key: key,\n      style: __assign(__assign({}, props), {\n        position: \"absolute\"\n      })\n    }, item.data);\n  })));\n};\n\nTextTransition.propTypes = {\n  text: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  direction: PropTypes.oneOf([\"up\", \"down\"]),\n  inline: PropTypes.bool,\n  noOverflow: PropTypes.bool,\n  delay: PropTypes.number,\n  className: PropTypes.string,\n  style: PropTypes.object,\n  springConfig: PropTypes.any\n};\nTextTransition.defaultProps = {\n  direction: \"up\",\n  noOverflow: false,\n  inline: false,\n  springConfig: config.default,\n  delay: 0,\n  className: \"\",\n  style: {}\n};\nexport default TextTransition;","map":{"version":3,"sources":["../../src/components/TextTransition.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from \"react\";\nimport * as PropTypes from \"prop-types\";\nimport { useSpring, useTransition, animated, config } from \"react-spring\";\nvar newText = function (text) { return ({ key: \"\" + Date.now(), data: text }); };\nvar TextTransition = function (_a) {\n    var text = _a.text, direction = _a.direction, inline = _a.inline, delay = _a.delay, className = _a.className, style = _a.style, noOverflow = _a.noOverflow, springConfig = _a.springConfig;\n    var placeholderRef = React.useRef(null);\n    var _b = React.useState(function () { return newText(text.toString()); }), content = _b[0], setContent = _b[1];\n    var _c = React.useState(0), timeoutId = _c[0], setTimeoutId = _c[1];\n    var _d = React.useState(true), isFirstRun = _d[0], setIsFirstRun = _d[1];\n    var _e = React.useState({ width: inline ? 0 : \"auto\" }), width = _e[0], setWidth = _e[1];\n    var transitions = useTransition(content, function (item) { return item.key; }, {\n        from: { opacity: 0, transform: \"translateY(\" + (direction === \"down\" ? \"-100%\" : \"100%\") + \")\" },\n        enter: { opacity: 1, transform: \"translateY(0%)\" },\n        leave: { opacity: 0, transform: \"translateY(\" + (direction === \"down\" ? \"100%\" : \"-100%\") + \")\" },\n        config: springConfig,\n        immediate: isFirstRun,\n        onDestroyed: function () {\n            setIsFirstRun(false);\n        }\n    });\n    var animatedProps = useSpring({\n        to: width,\n        config: springConfig,\n        immediate: isFirstRun,\n    });\n    React.useEffect(function () {\n        setTimeoutId(setTimeout(function () {\n            if (!placeholderRef.current)\n                return;\n            placeholderRef.current.innerHTML = text.toString();\n            if (inline)\n                setWidth({ width: placeholderRef.current.offsetWidth });\n            setContent(newText(text.toString()));\n        }, delay));\n    }, [text]);\n    React.useEffect(function () { return function () { return clearTimeout(timeoutId); }; }, []);\n    return (React.createElement(animated.div, { className: \"text-transition \" + className, style: __assign(__assign(__assign({}, animatedProps), { whiteSpace: inline ? \"nowrap\" : \"normal\", display: inline ? \"inline-block\" : \"block\", position: \"relative\" }), style) },\n        React.createElement(\"span\", { ref: placeholderRef, style: { visibility: \"hidden\" }, className: \"text-transition_placeholder\" }),\n        React.createElement(\"div\", { className: \"text-transition_inner\", style: {\n                overflow: noOverflow ? \"hidden\" : \"visible\",\n                display: \"block\",\n                position: \"absolute\",\n                top: 0,\n                left: 0,\n                height: \"100%\",\n                width: \"100%\"\n            } }, transitions.map(function (_a) {\n            var item = _a.item, props = _a.props, key = _a.key;\n            return (React.createElement(animated.div, { key: key, style: __assign(__assign({}, props), { position: \"absolute\" }) }, item.data));\n        }))));\n};\nTextTransition.propTypes = {\n    text: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n    direction: PropTypes.oneOf([\"up\", \"down\"]),\n    inline: PropTypes.bool,\n    noOverflow: PropTypes.bool,\n    delay: PropTypes.number,\n    className: PropTypes.string,\n    style: PropTypes.object,\n    springConfig: PropTypes.any,\n};\nTextTransition.defaultProps = {\n    direction: \"up\",\n    noOverflow: false,\n    inline: false,\n    springConfig: config.default,\n    delay: 0,\n    className: \"\",\n    style: {},\n};\nexport default TextTransition;\n//# sourceMappingURL=TextTransition.js.map"]},"metadata":{},"sourceType":"module"}